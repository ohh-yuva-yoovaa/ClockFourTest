<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>ServiceTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">ServiceTest (Jan 11, 2019 4:55:17 PM)</a> &gt; <a href="../../index.html" class="el_group">ClockFourTest</a> &gt; <a href="../index.html" class="el_bundle">src/test/java</a> &gt; <a href="index.source.html" class="el_package">com.clockfour.test</a> &gt; <span class="el_source">ServiceTest.java</span></div><h1>ServiceTest.java</h1><pre class="source lang-java linenums">package com.clockfour.test;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mock.web.MockMultipartFile;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.support.AnnotationConfigContextLoader;
import org.springframework.web.multipart.MultipartFile;

import com.clockfour.controller.TestController;
import com.clockfour.model.Employee;
import com.clockfour.model.EmployeesHolder;
import com.clockfour.model.Response;
import com.clockfour.service.TestService;

import junit.framework.TestCase;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = TestConfig.class, loader = AnnotationConfigContextLoader.class)
<span class="fc" id="L23">public class ServiceTest extends TestCase {</span>
	
	@Autowired
	TestController testController;
	
	@Autowired
	TestService testService;
	
	EmployeesHolder e;
	String [] postiveNameTestValues;
	String [] negativeNameTestValues;
	MultipartFile file;
	String eStr;
	
	@Before
	@Override
	public void setUp() throws Exception{
<span class="fc" id="L40">    	postiveNameTestValues = new String[] {&quot;John&quot;, &quot;Jane&quot;, &quot;Sam&quot;, &quot;samAntha&quot;};</span>
<span class="fc" id="L41">    	negativeNameTestValues = new String[] {&quot;Jack1&quot;, &quot;Jane.&quot;, &quot;S@m&quot;, &quot;!samantha&quot;};</span>
<span class="fc" id="L42">    	e = new EmployeesHolder();</span>
<span class="fc" id="L43">    	e.setEmployees(new Employee [] {</span>
<span class="fc" id="L44">    			new Employee(&quot;John&quot;,&quot;Doe&quot;,&quot;11/12/1990&quot;),</span>
<span class="fc" id="L45">    			new Employee(&quot;Jane&quot;,&quot;Moe&quot;,&quot;12/11/1980&quot;),</span>
<span class="fc" id="L46">    			new Employee(&quot;Jack&quot;,&quot;Mae&quot;,&quot;13/13/1990&quot;),</span>
<span class="fc" id="L47">    			new Employee(&quot;Jill&quot;,&quot;Ray&quot;,&quot;10/10/1970&quot;),</span>
    	});
<span class="fc" id="L49">    	file = new MockMultipartFile(&quot;test.png&quot;, &quot;test.png&quot;, &quot;image/png&quot;, new byte[] {10, 20, 30, 40});</span>
<span class="fc" id="L50">    	eStr = &quot;&lt;employees&gt; &lt;employee&gt; &lt;firstname&gt;a1&lt;/firstname&gt; &lt;lastname&gt;b&lt;/lastname&gt; &lt;dob&gt;c&lt;/dob&gt; &lt;/employee&gt; &lt;/employees&gt;&quot;;</span>
<span class="fc" id="L51">	}</span>
	
    @Test
    public void testFirstNameValidation() {
<span class="fc" id="L55">    	Employee e = new Employee();</span>
<span class="fc bfc" id="L56" title="All 2 branches covered.">    	for(String value : postiveNameTestValues) {</span>
<span class="fc" id="L57">	    	e.setFirstname(value);</span>
<span class="fc" id="L58">	    	assertTrue(e.getFirstname().equals(value));</span>
    	}
    	
<span class="fc bfc" id="L61" title="All 2 branches covered.">    	for(String value : negativeNameTestValues) {</span>
<span class="fc" id="L62">	    	e.setFirstname(value);</span>
<span class="pc bpc" id="L63" title="1 of 2 branches missed.">	    	assertTrue(!e.getFirstname().equals(value));</span>
    	}
<span class="fc" id="L65">    }</span>
    
    @Test
    public void testLastNameValidation() {
<span class="fc" id="L69">    	Employee e = new Employee();</span>
<span class="fc bfc" id="L70" title="All 2 branches covered.">    	for(String value : postiveNameTestValues) {</span>
<span class="fc" id="L71">	    	e.setLastname(value);</span>
<span class="fc" id="L72">	    	assertTrue(e.getLastname().equals(value));</span>
    	}
    	
<span class="fc bfc" id="L75" title="All 2 branches covered.">    	for(String value : negativeNameTestValues) {</span>
<span class="fc" id="L76">	    	e.setLastname(value);</span>
<span class="pc bpc" id="L77" title="1 of 2 branches missed.">	    	assertTrue(!e.getLastname().equals(value));</span>
    	}
<span class="fc" id="L79">    }</span>
    
    @Test
    public void testWriteExcel() {
<span class="fc" id="L83">	    assertTrue(testService.writeExcel(e));    </span>
<span class="fc" id="L84">    }</span>

    @Test
    public void testWritePDF() {
<span class="fc" id="L88">	    assertTrue(testService.writeExcel(e));    </span>
<span class="fc" id="L89">    }</span>
    
    @Test
    public void testProcessEmployees() {
<span class="fc" id="L93">	    assertTrue(testService.processEmployees(e));    </span>
<span class="fc" id="L94">    }</span>
    
    @Test
    public void testProcessImage() {
<span class="fc" id="L98">	    assertTrue(testService.processImage(file));    </span>
<span class="fc" id="L99">    }</span>
    
    @Test
    public void testProcess() {
<span class="fc" id="L103">	    Response r = testService.process(file, e);</span>
<span class="fc" id="L104">	    assertTrue(r.getImageName().equals(file.getOriginalFilename()));</span>
<span class="pc bpc" id="L105" title="1 of 2 branches missed.">	    assertTrue(r.getImageFileSize() == file.getSize());</span>
<span class="pc bpc" id="L106" title="2 of 4 branches missed.">	    assertTrue(r.getEmployees()!= null &amp;&amp; r.getEmployees().length == e.getEmployees().length);</span>
<span class="fc" id="L107">    }</span>
    
    @Test
    public void testController() {
<span class="fc" id="L111">	    Response r = testController.process(file, eStr);</span>
<span class="fc" id="L112">	    assertTrue(r.getImageName().equals(file.getOriginalFilename()));</span>
<span class="pc bpc" id="L113" title="1 of 2 branches missed.">	    assertTrue(r.getImageFileSize() == file.getSize());</span>
<span class="pc bpc" id="L114" title="2 of 4 branches missed.">	    assertTrue(r.getEmployees()!= null &amp;&amp; r.getEmployees().length == 1);</span>
<span class="fc" id="L115">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span>ServiceTest (Jan 11, 2019 4:55:17 PM)</div></body></html>